import{b as F,j as q}from"./chunk-UJOLDVRP.js";import{a as M,b as h,c as A,d as N,e as g,g as E,i as R,l as j,p as k,q as B,s as V}from"./chunk-6Z6IYR2N.js";import{H as x,Na as w,O as s,Ya as y,Za as C,_ as d,db as f,ga as r,ha as i,ia as p,na as S,p as l,ra as m,t as a,v,w as u,ya as b,za as c}from"./chunk-J2IPMSOX.js";var G=()=>["/"],T=()=>[""],_=(()=>{class t{constructor(){this.authService=a(F),this.toastrService=a(q),this.formBuilder=a(B),this.router=a(y),this.loginForm=this.formBuilder.group({email:new g("",h.required),password:new g("",h.required)}),this.formSubmitted=x()}onSubmit(){if(this.loginForm.invalid)return;let o=this.loginForm.getRawValue();this.formSubmitted.emit(o),this.login(o)}login(o){this.authService.login(o).then(e=>{e.isValid&&this.router.navigate(["/admin"],{state:{user:e.record}}).then(()=>{let n=e.record;this.toastrService.success(` Bienvenue ${n.name?n.name:n.email}!`,"Connexion",{closeButton:!0,progressAnimation:"decreasing",progressBar:!0})})})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-auth"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[b],decls:23,vars:5,consts:[[1,"flex","min-h-full"],[1,"card","bg-ui","tls-shadow-md","m-auto","h-fit","w-full","max-w-sm","p-1",3,"ngSubmit","formGroup"],[1,"p-8"],[1,"text-title","mb-1","text-xl","font-semibold"],[1,"bg-white",3,"routerLink"],["src","./assets/logo/logo.png","alt","logo",1,"object-cover","h-full","w-full","aspect-[3/2]","bg-white"],[1,"text-2xl","font-ubuntu","font-bold","uppercase"],[1,"space-y-6","my-8"],[1,"field","flex-col","flex"],["for","email2",1,"text-title","text-sm"],["formControlName","email","type","email","required","","name","email2","id","email2",1,"input","sz-md","variant-mixed","min-w-full"],[1,"field"],[1,"flex","justify-between"],["for","pwd",1,"text-title","text-sm"],[1,"link","intent-info","variant-ghost","text-sm",3,"routerLink"],["formControlName","password","type","password","required","","name","pwd","id","pwd",1,"input","sz-md","variant-mixed","min-w-full"],["type","submit",1,"btn","variant-primary","sz-md","w-full"]],template:function(e,n){e&1&&(r(0,"section",0)(1,"form",1),S("ngSubmit",function(){return n.onSubmit()}),r(2,"div",2)(3,"div")(4,"h1",3)(5,"a",4),p(6,"img",5),i()(),r(7,"p",6),m(8,"Connexion"),i()(),r(9,"div",7)(10,"div",8)(11,"label",9),m(12," Email"),i(),p(13,"input",10),i(),r(14,"div",11)(15,"div",12)(16,"label",13),m(17," Mot de passe"),i(),r(18,"a",14),m(19," Mot de passe oubli\xE9 ?"),i()(),p(20,"input",15),i(),r(21,"button",16),m(22,"Se connecter"),i()()()()()),e&2&&(s(),d("formGroup",n.loginForm),s(4),d("routerLink",c(3,G)),s(13),d("routerLink",c(4,T)))},dependencies:[C,V,E,M,A,N,k,R,j]})}}return t})();var z=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",title:"Authentification",component:_}],D=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=l({imports:[f.forChild(z),f]})}}return t})();var et=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=l({imports:[w,D]})}}return t})();export{et as AuthentificationModule};
