import{$ as G,B as ot,C as rt,Fa as Y,G as Q,Ja as pt,L as Lt,M as at,Ma as ft,O as u,P as j,R as Ut,Ua as Bt,V as ct,W as Ht,Y as V,Z as $,_ as p,a as m,b as L,ba as I,d as O,e as c,g as D,ga as w,ha as R,ia as W,ja as lt,ka as ht,la as ut,ma as Mt,na as z,o as U,oa as y,q as qt,ra as E,s as H,t as M,ta as P,v as nt,ya as dt,z as Nt}from"./chunk-J2IPMSOX.js";var k=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(k||{}),De="*";function $t(n,e){return{type:k.Trigger,name:n,definitions:e,options:{}}}function mt(n,e=null){return{type:k.Animate,styles:e,timings:n}}function Ae(n,e=null){return{type:k.Sequence,steps:n,options:e}}function X(n){return{type:k.Style,styles:n,offset:null}}function tt(n,e,t){return{type:k.State,name:n,styles:e,options:t}}function gt(n,e,t=null){return{type:k.Transition,expr:n,animation:e,options:t}}var Kt=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Vt=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++t==o&&this._onFinish()}),r.onDestroy(()=>{++i==o&&this._onDestroy()}),r.onStart(()=>{++s==o&&this._onStart()})}),this.totalTime=this.players.reduce((r,a)=>Math.max(r,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},xe="!";var Gt=["toast-component",""];function re(n,e){if(n&1){let t=ut();w(0,"button",5),z("click",function(){ot(t);let s=y();return rt(s.remove())}),w(1,"span",6),E(2,"\xD7"),R()()}}function ae(n,e){if(n&1&&(lt(0),E(1),ht()),n&2){let t=y(2);u(),P("[",t.duplicatesCount+1,"]")}}function ce(n,e){if(n&1&&(w(0,"div"),E(1),V(2,ae,2,1,"ng-container",4),R()),n&2){let t=y();I(t.options.titleClass),$("aria-label",t.title),u(),P(" ",t.title," "),u(),p("ngIf",t.duplicatesCount)}}function le(n,e){if(n&1&&W(0,"div",7),n&2){let t=y();I(t.options.messageClass),p("innerHTML",t.message,at)}}function he(n,e){if(n&1&&(w(0,"div",8),E(1),R()),n&2){let t=y();I(t.options.messageClass),$("aria-label",t.message),u(),P(" ",t.message," ")}}function ue(n,e){if(n&1&&(w(0,"div"),W(1,"div",9),R()),n&2){let t=y();u(),G("width",t.width+"%")}}function de(n,e){if(n&1){let t=ut();w(0,"button",5),z("click",function(){ot(t);let s=y();return rt(s.remove())}),w(1,"span",6),E(2,"\xD7"),R()()}}function pe(n,e){if(n&1&&(lt(0),E(1),ht()),n&2){let t=y(2);u(),P("[",t.duplicatesCount+1,"]")}}function fe(n,e){if(n&1&&(w(0,"div"),E(1),V(2,pe,2,1,"ng-container",4),R()),n&2){let t=y();I(t.options.titleClass),$("aria-label",t.title),u(),P(" ",t.title," "),u(),p("ngIf",t.duplicatesCount)}}function me(n,e){if(n&1&&W(0,"div",7),n&2){let t=y();I(t.options.messageClass),p("innerHTML",t.message,at)}}function ge(n,e){if(n&1&&(w(0,"div",8),E(1),R()),n&2){let t=y();I(t.options.messageClass),$("aria-label",t.message),u(),P(" ",t.message," ")}}function be(n,e){if(n&1&&(w(0,"div"),W(1,"div",9),R()),n&2){let t=y();u(),G("width",t.width+"%")}}var bt=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},yt=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},vt=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new D;_activate=new D;_manualClose=new D;_resetTimeout=new D;_countDuplicate=new D;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},B=class{toastId;config;message;title;toastType;toastRef;_onTap=new D;_onAction=new D;constructor(e,t,i,s,o,r){this.toastId=e,this.config=t,this.message=i,this.title=s,this.toastType=o,this.toastRef=r,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},Wt={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},zt=new qt("ToastConfig"),_t=class extends yt{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){let i=this._componentFactoryResolver.resolveComponentFactory(e.component),s;return s=i.create(e.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},ye=(()=>{class n{_document=M(pt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wt=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},ve=(()=>{class n{_overlayContainer=M(ye);_componentFactoryResolver=M(Ut);_appRef=M(Y);_document=M(pt);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){let s=this._document.createElement("div");return s.id="toast-container",s.classList.add(t),s.classList.add("toast-container"),i?i.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(t){return new _t(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new wt(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jt=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,s,o,r){this.overlay=i,this._injector=s,this.sanitizer=o,this.ngZone=r,this.toastrConfig=m(m({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=m(m({},t.default.iconClasses),t.config.iconClasses))}show(t,i,s={},o=""){return this._preBuildNotification(o,t,i,this.applyConfig(s))}success(t,i,s={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,t,i,this.applyConfig(s))}error(t,i,s={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,t,i,this.applyConfig(s))}info(t,i,s={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,t,i,this.applyConfig(s))}warning(t,i,s={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,t,i,this.applyConfig(s))}clear(t){for(let i of this.toasts)if(t!==void 0){if(i.toastId===t){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(t){let i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(t="",i="",s,o){let{includeTitleDuplicates:r}=this.toastrConfig;for(let a of this.toasts){let l=r&&a.title===t;if((!r||l)&&a.message===i)return a.toastRef.onDuplicate(s,o),a}return null}applyConfig(t={}){return m(m({},this.toastrConfig),t)}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,s,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,s,o)):this._buildNotification(t,i,s,o)}_buildNotification(t,i,s,o){if(!o.toastComponent)throw new Error("toastComponent required");let r=this.findDuplicate(s,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||i)&&this.toastrConfig.preventDuplicates&&r!==null)return r;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let h=i;i&&o.enableHtml&&(h=this.sanitizer.sanitize(Lt.HTML,i));let C=new vt(l),f=new B(this.index,o,h,s,t,C),S=[{provide:B,useValue:f}],F=Q.create({providers:S,parent:this._injector}),g=new bt(o.toastComponent,F),d=l.attach(g,o.newestOnTop);C.componentInstance=d.instance;let q={toastId:this.index,title:s||"",message:i||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:f.onTap(),onAction:f.onAction(),portal:d};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{q.toastRef.activate()})),this.toasts.push(q),q}static \u0275fac=function(i){return new(i||n)(H(zt),H(ve),H(Q),H(Bt),H(ct))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_e=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,s){this.toastrService=t,this.toastPackage=i,this.ngZone=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=L(m({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=L(m({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=L(m({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(j(Jt),j(B),j(ct))};static \u0275cmp=nt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,s){i&1&&z("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(Mt("@flyInOut",s.state),I(s.toastClasses),G("display",s.displayStyle))},standalone:!0,features:[dt],attrs:Gt,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&V(0,re,3,0,"button",0)(1,ce,3,5,"div",1)(2,le,1,3,"div",2)(3,he,2,4,"div",3)(4,ue,2,2,"div",4),i&2&&(p("ngIf",s.options.closeButton),u(),p("ngIf",s.title),u(),p("ngIf",s.message&&s.options.enableHtml),u(),p("ngIf",s.message&&!s.options.enableHtml),u(),p("ngIf",s.options.progressBar))},dependencies:[ft],encapsulation:2,data:{animation:[$t("flyInOut",[tt("inactive",X({opacity:0})),tt("active",X({opacity:1})),tt("removed",X({opacity:0})),gt("inactive => active",mt("{{ easeTime }}ms {{ easing }}")),gt("active => removed",mt("{{ easeTime }}ms {{ easing }}"))])]}})}return n})(),we=L(m({},Wt),{toastComponent:_e}),Je=(n={})=>Nt([{provide:zt,useValue:{default:we,config:n}}]);var Ce=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){if(this.state==="inactive")return"none"}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,s){this.toastrService=t,this.toastPackage=i,this.appRef=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||n)(j(Jt),j(B),j(Y))};static \u0275cmp=nt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,s){i&1&&z("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(I(s.toastClasses),G("display",s.displayStyle))},standalone:!0,features:[dt],attrs:Gt,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&V(0,de,3,0,"button",0)(1,fe,3,5,"div",1)(2,me,1,3,"div",2)(3,ge,2,4,"div",3)(4,be,2,2,"div",4),i&2&&(p("ngIf",s.options.closeButton),u(),p("ngIf",s.title),u(),p("ngIf",s.message&&s.options.enableHtml),u(),p("ngIf",s.message&&!s.options.enableHtml),u(),p("ngIf",s.options.progressBar))},dependencies:[ft],encapsulation:2})}return n})(),Ze=L(m({},Wt),{toastComponent:Ce});var J={production:!0,apiUrl:"https://rec-back.dev.technostrea.fr/api",authUrl:"https://pocketbase.dev.technostrea.fr",endpoints:{recipes:{GET_ALL_RECIPE:(n=0,e=10)=>`/recipe/all?page=${n}&size=${e}`,POST_STORE_RECIPE:"/recipe/create"},ingredients:{GET_ALL_INGREDIENT:"/ingredients"},step:{}}};var _=class n extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,n.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof n||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return m({},this)}},et=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Te(n,e){let t={};if(typeof n!="string")return t;let i=Object.assign({},e||{}).decode||Se,s=0;for(;s<n.length;){let o=n.indexOf("=",s);if(o===-1)break;let r=n.indexOf(";",s);if(r===-1)r=n.length;else if(r<o){s=n.lastIndexOf(";",o-1)+1;continue}let a=n.slice(s,o).trim();if(t[a]===void 0){let l=n.slice(o+1,r).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{t[a]=i(l)}catch{t[a]=l}}s=r+1}return t}function Zt(n,e,t){let i=Object.assign({},t||{}),s=i.encode||Oe;if(!et.test(n))throw new TypeError("argument name is invalid");let o=s(e);if(o&&!et.test(o))throw new TypeError("argument val is invalid");let r=n+"="+o;if(i.maxAge!=null){let a=i.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(i.domain){if(!et.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!et.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Se(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function Oe(n){return encodeURIComponent(n)}var Ie=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal,ee;function K(n){if(n)try{let e=decodeURIComponent(ee(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function ie(n,e=0){let t=K(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}ee=typeof atob!="function"||Ie?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,i,s=0,o=0,r="";i=e.charAt(o++);~i&&(t=s%4?64*t+i:i,s++%4)?r+=String.fromCharCode(255&t>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}:atob;var Qt="pb_auth",Z=class{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!ie(this.token)}get isSuperuser(){let e=K(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),K(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Qt){let i=Te(e||"")[t]||"",s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.record||s.model||null)}exportToCookie(e,t=Qt){let i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=K(this.token);i.expires=s?.exp?new Date(1e3*s.exp):new Date("1970-01-01"),e=Object.assign({},i,e);let o={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null},r=Zt(t,JSON.stringify(o),e),a=typeof Blob<"u"?new Blob([r]).size:r.length;if(o.record&&a>4096){o.record={id:o.record?.id,email:o.record?.email};let l=["collectionId","collectionName","verified"];for(let h in this.record)l.includes(h)&&(o.record[h]=this.record[h]);r=Zt(t,JSON.stringify(o),e)}return r}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==e)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(let e of this._onChangeCallbacks)e&&e(this.token,this.record)}},Tt=class extends Z{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){let e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){let t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;let t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}},T=class{constructor(e){this.client=e}},St=class extends T{getAll(e){return c(this,null,function*(){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)})}update(e,t){return c(this,null,function*(){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)})}testS3(e="storage",t){return c(this,null,function*(){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)})}testEmail(e,t,i,s){return c(this,null,function*(){return s=Object.assign({method:"POST",body:{email:t,template:i,collection:e}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)})}generateAppleClientSecret(e,t,i,s,o,r){return c(this,null,function*(){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:i,privateKey:s,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)})}},Re=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Ft(n){if(n){n.query=n.query||{};for(let e in n)Re.includes(e)||(n.query[e]=n[e],delete n[e])}}function se(n){let e=[];for(let t in n){if(n[t]===null)continue;let i=n[t],s=encodeURIComponent(t);if(Array.isArray(i))for(let o of i)e.push(s+"="+encodeURIComponent(o));else i instanceof Date?e.push(s+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?e.push(s+"="+encodeURIComponent(JSON.stringify(i))):e.push(s+"="+encodeURIComponent(i))}return e.join("&")}var it=class extends T{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t,i){return c(this,null,function*(){if(!e)throw new Error("topic must be set.");let s=e;if(i){Ft(i=Object.assign({},i));let r="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+r}let o=function(r){let a=r,l;try{l=JSON.parse(a?.data)}catch{}t(l||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(o),this.isConnected?this.subscriptions[s].length===1?yield this.submitSubscriptions():this.eventSource?.addEventListener(s,o):yield this.connect(),()=>c(this,null,function*(){return this.unsubscribeByTopicAndListener(e,o)})})}unsubscribe(e){return c(this,null,function*(){let t=!1;if(e){let i=this.getSubscriptionsByTopic(e);for(let s in i)if(this.hasSubscriptionListeners(s)){for(let o of this.subscriptions[s])this.eventSource?.removeEventListener(s,o);delete this.subscriptions[s],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&(yield this.submitSubscriptions()):this.disconnect()})}unsubscribeByPrefix(e){return c(this,null,function*(){let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let s of this.subscriptions[i])this.eventSource?.removeEventListener(i,s);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){return c(this,null,function*(){let i=!1,s=this.getSubscriptionsByTopic(e);for(let o in s){if(!Array.isArray(this.subscriptions[o])||!this.subscriptions[o].length)continue;let r=!1;for(let a=this.subscriptions[o].length-1;a>=0;a--)this.subscriptions[o][a]===t&&(r=!0,delete this.subscriptions[o][a],this.subscriptions[o].splice(a,1),this.eventSource?.removeEventListener(o,t));r&&(this.subscriptions[o].length||delete this.subscriptions[o],i||this.hasSubscriptionListeners(o)||(i=!0))}this.hasSubscriptionListeners()?i&&(yield this.submitSubscriptions()):this.disconnect()})}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}submitSubscriptions(){return c(this,null,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!e?.isAbort)throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){let t={};e=e.includes("?")?e:e+"?";for(let i in this.subscriptions)(i+"?").startsWith(e)&&(t[i]=this.subscriptions[i]);return t}getNonEmptySubscriptionKeys(){let e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return c(this,null,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{let t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then(()=>c(this,null,function*(){let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,yield this.submitSubscriptions()})).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);let i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let o of i[s])o(e)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){let e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(let t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new _(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);let t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}},st=class extends T{decode(e){return e}getFullList(e,t){return c(this,null,function*(){if(typeof e=="number")return this._getFullList(e,t);let i=500;return(t=Object.assign({},e,t)).batch&&(i=t.batch,delete t.batch),this._getFullList(i,t)})}getList(e=1,t=30,i){return c(this,null,function*(){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send(this.baseCrudPath,i).then(s=>(s.items=s.items?.map(o=>this.decode(o))||[],s))})}getFirstListItem(e,t){return c(this,null,function*(){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(i=>{if(!i?.items?.length)throw new _({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})})}getOne(e,t){return c(this,null,function*(){if(!e)throw new _({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(i=>this.decode(i))})}create(e,t){return c(this,null,function*(){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(i=>this.decode(i))})}update(e,t,i){return c(this,null,function*(){return i=Object.assign({method:"PATCH",body:t},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),i).then(s=>this.decode(s))})}delete(e,t){return c(this,null,function*(){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)})}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let i=[],s=o=>c(this,null,function*(){return this.getList(o,e||500,t).then(r=>{let a=r.items;return i=i.concat(a),a.length==r.perPage?s(o+1):i})});return s(1)}};function A(n,e,t,i){let s=i!==void 0;return s||t!==void 0?s?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,i),e):Object.assign(e,t):e}function Ct(n){n._resetAutoRefresh?.()}var Ot=class n extends st{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}subscribe(e,t,i){return c(this,null,function*(){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,i)})}unsubscribe(e){return c(this,null,function*(){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){return c(this,null,function*(){if(typeof e=="number")return O(n.prototype,this,"getFullList").call(this,e,t);let i=Object.assign({},e,t);return O(n.prototype,this,"getFullList").call(this,i)})}getList(e=1,t=30,i){return c(this,null,function*(){return O(n.prototype,this,"getList").call(this,e,t,i)})}getFirstListItem(e,t){return c(this,null,function*(){return O(n.prototype,this,"getFirstListItem").call(this,e,t)})}getOne(e,t){return c(this,null,function*(){return O(n.prototype,this,"getOne").call(this,e,t)})}create(e,t){return c(this,null,function*(){return O(n.prototype,this,"create").call(this,e,t)})}update(e,t,i){return c(this,null,function*(){return O(n.prototype,this,"update").call(this,e,t,i).then(s=>{if(this.client.authStore.record?.id===s?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let o=Object.assign({},this.client.authStore.record.expand),r=Object.assign({},this.client.authStore.record,s);o&&(r.expand=Object.assign(o,s.expand)),this.client.authStore.save(this.client.authStore.token,r)}return s})})}delete(e,t){return c(this,null,function*(){return O(n.prototype,this,"delete").call(this,e,t).then(i=>(!i||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i))})}authResponse(e){let t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}listAuthMethods(e){return c(this,null,function*(){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)})}authWithPassword(e,t,i){return c(this,null,function*(){let s;i=Object.assign({method:"POST",body:{identity:e,password:t}},i),this.isSuperusers&&(s=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||Ct(this.client));let o=yield this.client.send(this.baseCollectionPath+"/auth-with-password",i);return o=this.authResponse(o),s&&this.isSuperusers&&function(a,l,h,C){Ct(a);let f=a.beforeSend,S=a.authStore.record,F=a.authStore.onChange((g,d)=>{(!g||d?.id!=S?.id||(d?.collectionId||S?.collectionId)&&d?.collectionId!=S?.collectionId)&&Ct(a)});a._resetAutoRefresh=function(){F(),a.beforeSend=f,delete a._resetAutoRefresh},a.beforeSend=(g,d)=>c(this,null,function*(){let q=a.authStore.token;if(d.query?.autoRefresh)return f?f(g,d):{url:g,sendOptions:d};let b=a.authStore.isValid;if(b&&ie(a.authStore.token,l))try{yield h()}catch{b=!1}b||(yield C());let N=d.headers||{};for(let v in N)if(v.toLowerCase()=="authorization"&&q==N[v]&&a.authStore.token){N[v]=a.authStore.token;break}return d.headers=N,f?f(g,d):{url:g,sendOptions:d}})}(this.client,s,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),o})}authWithOAuth2Code(e,t,i,s,o,r,a){return c(this,null,function*(){let l={method:"POST",body:{provider:e,code:t,codeVerifier:i,redirectURL:s,createData:o}};return l=A("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",l,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(h=>this.authResponse(h))})}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});let t=e?.[0]||{},i=null;t.urlCallback||(i=Yt(void 0));let s=new it(this.client);function o(){i?.close(),s.unsubscribe()}let r={},a=t.requestKey;return a&&(r.requestKey=a),this.listAuthMethods(r).then(l=>{let h=l.oauth2.providers.find(S=>S.name===t.provider);if(!h)throw new _(new Error(`Missing or invalid provider "${t.provider}".`));let C=this.client.buildURL("/api/oauth2-redirect"),f=a?this.client.cancelControllers?.[a]:void 0;return f&&(f.signal.onabort=()=>{o()}),new Promise((S,F)=>c(this,null,function*(){try{yield s.subscribe("@oauth2",b=>c(this,null,function*(){let N=s.clientId;try{if(!b.state||N!==b.state)throw new Error("State parameters don't match.");if(b.error||!b.code)throw new Error("OAuth2 redirect error or missing code: "+b.error);let v=Object.assign({},t);delete v.provider,delete v.scopes,delete v.createData,delete v.urlCallback,f?.signal?.onabort&&(f.signal.onabort=null);let ne=yield this.authWithOAuth2Code(h.name,b.code,h.codeVerifier,C,t.createData,v);S(ne)}catch(v){F(new _(v))}o()}));let g={state:s.clientId};t.scopes?.length&&(g.scope=t.scopes.join(" "));let d=this._replaceQueryParams(h.authURL+C,g);yield(t.urlCallback||function(b){i?i.location.href=b:i=Yt(b)})(d)}catch(g){o(),F(new _(g))}}))}).catch(l=>{throw o(),l})}authRefresh(e,t){return c(this,null,function*(){let i={method:"POST"};return i=A("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(s=>this.authResponse(s))})}requestPasswordReset(e,t,i){return c(this,null,function*(){let s={method:"POST",body:{email:e}};return s=A("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)})}confirmPasswordReset(e,t,i,s,o){return c(this,null,function*(){let r={method:"POST",body:{token:e,password:t,passwordConfirm:i}};return r=A("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)})}requestVerification(e,t,i){return c(this,null,function*(){let s={method:"POST",body:{email:e}};return s=A("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)})}confirmVerification(e,t,i){return c(this,null,function*(){let s={method:"POST",body:{token:e}};return s=A("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{let o=K(e),r=this.client.authStore.record;return r&&!r.verified&&r.id===o.id&&r.collectionId===o.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})})}requestEmailChange(e,t,i){return c(this,null,function*(){let s={method:"POST",body:{newEmail:e}};return s=A("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)})}confirmEmailChange(e,t,i,s){return c(this,null,function*(){let o={method:"POST",body:{token:e,password:t}};return o=A("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{let r=K(e),a=this.client.authStore.record;return a&&a.id===r.id&&a.collectionId===r.collectionId&&this.client.authStore.clear(),!0})})}listExternalAuths(e,t){return c(this,null,function*(){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))})}unlinkExternalAuth(e,t,i){return c(this,null,function*(){let s=yield this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(s.id,i).then(()=>!0)})}requestOTP(e,t){return c(this,null,function*(){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)})}authWithOTP(e,t,i){return c(this,null,function*(){return i=Object.assign({method:"POST",body:{otpId:e,password:t}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then(s=>this.authResponse(s))})}impersonate(e,t,i){return c(this,null,function*(){(i=Object.assign({method:"POST",body:{duration:t}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);let s=new x(this.client.baseURL,new Z,this.client.lang),o=yield s.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),i);return s.authStore.save(o?.token,this.decode(o?.record||{})),s})}_replaceQueryParams(e,t={}){let i=e,s="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));let o={},r=s.split("&");for(let a of r){if(a=="")continue;let l=a.split("=");o[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete o[a]:o[a]=t[a]);s="";for(let a in o)o.hasOwnProperty(a)&&(s!=""&&(s+="&"),s+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(o[a].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}};function Yt(n){if(typeof window>"u"||!window?.open)throw new _(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,i=window.innerWidth,s=window.innerHeight;e=e>i?i:e,t=t>s?s:t;let o=i/2-e/2,r=s/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+r+",left="+o+",resizable,menubar=no")}var It=class extends st{get baseCrudPath(){return"/api/collections"}import(e,t=!1,i){return c(this,null,function*(){return i=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)})}getScaffolds(e){return c(this,null,function*(){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)})}truncate(e,t){return c(this,null,function*(){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)})}},Rt=class extends T{getList(e=1,t=30,i){return c(this,null,function*(){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:e,perPage:t},i.query),this.client.send("/api/logs",i)})}getOne(e,t){return c(this,null,function*(){if(!e)throw new _({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)})}getStats(e){return c(this,null,function*(){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)})}},Et=class extends T{check(e){return c(this,null,function*(){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)})}},Dt=class extends T{getUrl(e,t,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,i)}getURL(e,t,i={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";let s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let o=this.client.buildURL(s.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;let r=new URLSearchParams(i);o+=(o.includes("?")?"&":"?")+r}return o}getToken(e){return c(this,null,function*(){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>t?.token||"")})}},At=class extends T{getFullList(e){return c(this,null,function*(){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)})}create(e,t){return c(this,null,function*(){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)})}upload(e,t){return c(this,null,function*(){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)})}delete(e,t){return c(this,null,function*(){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)})}restore(e,t){return c(this,null,function*(){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)})}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}};function xt(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function jt(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function Xt(n){for(let e in n){let t=Array.isArray(n[e])?n[e]:[n[e]];for(let i of t)if(xt(i))return!0}return!1}var Ee=/^[\-\.\d]+$/;function te(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&Ee.test(n)){let e=+n;if(""+e===n)return e}return n}var Pt=class extends T{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new kt(this.requests,e)),this.subs[e]}send(e){return c(this,null,function*(){let t=new FormData,i=[];for(let s=0;s<this.requests.length;s++){let o=this.requests[s];if(i.push({method:o.method,url:o.url,headers:o.headers,body:o.json}),o.files)for(let r in o.files){let a=o.files[r]||[];for(let l of a)t.append("requests."+s+"."+r,l)}}return t.append("@jsonPayload",JSON.stringify({requests:i})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)})}},kt=class{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);let i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}create(e,t){t=Object.assign({body:e||{}},t);let i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,t),this.requests.push(i)}update(e,t,i){i=Object.assign({body:t||{}},i);let s={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,i),this.requests.push(s)}delete(e,t){t=Object.assign({},t);let i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,t),this.requests.push(i)}prepareRequest(e,t){if(Ft(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){let s=se(t.query);s&&(e.url+=(e.url.includes("?")?"&":"?")+s)}let i=t.body;jt(i)&&(i=function(o){let r={};return o.forEach((a,l)=>{if(l==="@jsonPayload"&&typeof a=="string")try{let h=JSON.parse(a);Object.assign(r,h)}catch(h){console.warn("@jsonPayload error:",h)}else r[l]!==void 0?(Array.isArray(r[l])||(r[l]=[r[l]]),r[l].push(te(a))):r[l]=te(a)}),r}(i));for(let s in i){let o=i[s];if(xt(o))e.files[s]=e.files[s]||[],e.files[s].push(o);else if(Array.isArray(o)){let r=[],a=[];for(let l of o)xt(l)?r.push(l):a.push(l);if(r.length>0&&r.length==o.length){e.files[s]=e.files[s]||[];for(let l of r)e.files[s].push(l)}else if(e.json[s]=a,r.length>0){let l=s;s.startsWith("+")||s.endsWith("+")||(l+="+"),e.files[l]=e.files[l]||[];for(let h of r)e.files[l].push(h)}}else e.json[s]=o}}},x=class{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=i,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new Z:this.authStore=new Tt,this.collections=new It(this),this.files=new Dt(this),this.logs=new Rt(this),this.settings=new St(this),this.realtime=new it(this),this.health=new Et(this),this.backups=new At(this)}get admins(){return this.collection("_superusers")}createBatch(){return new Pt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Ot(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let i in t){let s=t[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+i+"}",s)}return e}getFileUrl(e,t,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,i)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}send(e,t){return c(this,null,function*(){t=this.initSendOptions(e,t);let i=this.buildURL(e);if(this.beforeSend){let s=Object.assign({},yield this.beforeSend(i,t));s.url!==void 0||s.options!==void 0?(i=s.url||i,t=s.options||t):Object.keys(s).length&&(t=s,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){let s=se(t.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(i,t).then(s=>c(this,null,function*(){let o={};try{o=yield s.json()}catch{}if(this.afterSend&&(o=yield this.afterSend(s,o,t)),s.status>=400)throw new _({url:s.url,status:s.status,data:o});return o})).catch(s=>{throw new _(s)})})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(s){if(typeof FormData>"u"||s===void 0||typeof s!="object"||s===null||jt(s)||!Xt(s))return s;let o=new FormData;for(let r in s){let a=s[r];if(typeof a!="object"||Xt({data:a})){let l=Array.isArray(a)?a:[a];for(let h of l)o.append(r,h)}else{let l={};l[r]=a,o.append("@jsonPayload",JSON.stringify(l))}}return o}(t.body),Ft(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||jt(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){let i=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(i);let s=new AbortController;this.cancelControllers[i]=s,t.signal=s.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let i in e)if(i.toLowerCase()==t)return e[i];return null}};var ri=(()=>{class n{constructor(){this.user=Ht(void 0)}login(t){return c(this,null,function*(){let{email:i,password:s}=t,o=new x(J.authUrl);yield o.collection("users").authWithPassword(i,s);let r={isValid:o.authStore.isValid,record:o.authStore.record,token:o.authStore.token};return this.user.set(r),r})}register(t){return c(this,null,function*(){return yield new x(J.authUrl).collection("users").create(t)})}logout(){return c(this,null,function*(){return new x(J.authUrl).authStore.clear()})}updateUser(){let t=new x(J.authUrl);this.user.set({isValid:t.authStore.isValid,record:t.authStore.record,token:t.authStore.token})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{J as a,ri as b,k as c,De as d,Ae as e,X as f,Kt as g,Vt as h,xe as i,Jt as j,Je as k};
