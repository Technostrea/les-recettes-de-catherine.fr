import{$a as dt,Aa as Ht,B as Ft,Ba as W,Ca as y,D as U,E as H,G as st,Ia as E,K as qt,Ka as j,N as nt,O as ot,Pa as ut,S as Z,Xa as Q,Z as Nt,_ as rt,a as m,aa as u,b as N,ba as x,cb as pt,da as Lt,f as O,g as c,ha as at,ia as Ut,j as D,ka as K,la as V,ma as p,mb as Mt,na as $,pa as I,ua as w,va as R,wa as G,xa as ct,ya as lt,z as L,za as ht}from"./chunk-X2AQS727.js";var P=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(P||{}),De="*";function Vt(n,t){return{type:P.Trigger,name:n,definitions:t,options:{}}}function ft(n,t=null){return{type:P.Animate,styles:t,timings:n}}function Ae(n,t=null){return{type:P.Sequence,steps:n,options:t}}function Y(n){return{type:P.Style,styles:n,offset:null}}function X(n,t,e){return{type:P.State,name:n,styles:t,options:e}}function mt(n,t,e=null){return{type:P.Transition,expr:n,animation:t,options:e}}var Bt=class{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Kt=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,s=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++e==o&&this._onFinish()}),r.onDestroy(()=>{++i==o&&this._onDestroy()}),r.onStart(()=>{++s==o&&this._onStart()})}),this.totalTime=this.players.reduce((r,a)=>Math.max(r,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(i=>{let s=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(s)})}getPosition(){let t=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},xe="!";var $t=["toast-component",""];function re(n,t){if(n&1){let e=ht();w(0,"button",5),W("click",function(){nt(e);let s=y();return ot(s.remove())}),w(1,"span",6),E(2,"\xD7"),R()()}}function ae(n,t){if(n&1&&(ct(0),E(1),lt()),n&2){let e=y(2);u(),j("[",e.duplicatesCount+1,"]")}}function ce(n,t){if(n&1&&(w(0,"div"),E(1),K(2,ae,2,1,"ng-container",4),R()),n&2){let e=y();I(e.options.titleClass),V("aria-label",e.title),u(),j(" ",e.title," "),u(),p("ngIf",e.duplicatesCount)}}function le(n,t){if(n&1&&G(0,"div",7),n&2){let e=y();I(e.options.messageClass),p("innerHTML",e.message,rt)}}function he(n,t){if(n&1&&(w(0,"div",8),E(1),R()),n&2){let e=y();I(e.options.messageClass),V("aria-label",e.message),u(),j(" ",e.message," ")}}function ue(n,t){if(n&1&&(w(0,"div"),G(1,"div",9),R()),n&2){let e=y();u(),$("width",e.width+"%")}}function de(n,t){if(n&1){let e=ht();w(0,"button",5),W("click",function(){nt(e);let s=y();return ot(s.remove())}),w(1,"span",6),E(2,"\xD7"),R()()}}function pe(n,t){if(n&1&&(ct(0),E(1),lt()),n&2){let e=y(2);u(),j("[",e.duplicatesCount+1,"]")}}function fe(n,t){if(n&1&&(w(0,"div"),E(1),K(2,pe,2,1,"ng-container",4),R()),n&2){let e=y();I(e.options.titleClass),V("aria-label",e.title),u(),j(" ",e.title," "),u(),p("ngIf",e.duplicatesCount)}}function me(n,t){if(n&1&&G(0,"div",7),n&2){let e=y();I(e.options.messageClass),p("innerHTML",e.message,rt)}}function ge(n,t){if(n&1&&(w(0,"div",8),E(1),R()),n&2){let e=y();I(e.options.messageClass),V("aria-label",e.message),u(),j(" ",e.message," ")}}function be(n,t){if(n&1&&(w(0,"div"),G(1,"div",9),R()),n&2){let e=y();u(),$("width",e.width+"%")}}var gt=class{_attachedHost;component;viewContainerRef;injector;constructor(t,e){this.component=t,this.injector=e}attach(t,e){return this._attachedHost=t,t.attach(this,e)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},bt=class{_attachedPortal;_disposeFn;attach(t,e){return this._attachedPortal=t,this.attachComponentPortal(t,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},yt=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new D;_activate=new D;_manualClose=new D;_resetTimeout=new D;_countDuplicate=new D;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,e){t&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},M=class{toastId;config;message;title;toastType;toastRef;_onTap=new D;_onAction=new D;constructor(t,e,i,s,o,r){this.toastId=t,this.config=e,this.message=i,this.title=s,this.toastType=o,this.toastRef=r,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},Gt={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Wt=new Ft("ToastConfig"),vt=class extends bt{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,e,i){super(),this._hostDomElement=t,this._componentFactoryResolver=e,this._appRef=i}attachComponentPortal(t,e){let i=this._componentFactoryResolver.resolveComponentFactory(t.component),s;return s=i.create(t.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},ye=(()=>{class n{_document=H(dt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_t=class{_portalHost;constructor(t){this._portalHost=t}attach(t,e=!0){return this._portalHost.attach(t,e)}detach(){return this._portalHost.detach()}},ve=(()=>{class n{_overlayContainer=H(ye);_componentFactoryResolver=H(Lt);_appRef=H(Q);_document=H(dt);_paneElements=new Map;create(e,i){return this._createOverlayRef(this.getPaneElement(e,i))}getPaneElement(e="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[e]||(this._paneElements.get(i)[e]=this._createPaneElement(e,i)),this._paneElements.get(i)[e]}_createPaneElement(e,i){let s=this._document.createElement("div");return s.id="toast-container",s.classList.add(e),s.classList.add("toast-container"),i?i.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(e){return new vt(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new _t(this._createPortalHost(e))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zt=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,i,s,o,r){this.overlay=i,this._injector=s,this.sanitizer=o,this.ngZone=r,this.toastrConfig=m(m({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=m(m({},e.default.iconClasses),e.config.iconClasses))}show(e,i,s={},o=""){return this._preBuildNotification(o,e,i,this.applyConfig(s))}success(e,i,s={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,e,i,this.applyConfig(s))}error(e,i,s={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,e,i,this.applyConfig(s))}info(e,i,s={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,e,i,this.applyConfig(s))}warning(e,i,s={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,e,i,this.applyConfig(s))}clear(e){for(let i of this.toasts)if(e!==void 0){if(i.toastId===e){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(e){let i=this._findToast(e);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(e="",i="",s,o){let{includeTitleDuplicates:r}=this.toastrConfig;for(let a of this.toasts){let l=r&&a.title===e;if((!r||l)&&a.message===i)return a.toastRef.onDuplicate(s,o),a}return null}applyConfig(e={}){return m(m({},this.toastrConfig),e)}_findToast(e){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===e)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(e,i,s,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,i,s,o)):this._buildNotification(e,i,s,o)}_buildNotification(e,i,s,o){if(!o.toastComponent)throw new Error("toastComponent required");let r=this.findDuplicate(s,i,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||i)&&this.toastrConfig.preventDuplicates&&r!==null)return r;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let h=i;i&&o.enableHtml&&(h=this.sanitizer.sanitize(Nt.HTML,i));let C=new yt(l),f=new M(this.index,o,h,s,e,C),S=[{provide:M,useValue:f}],k=Z.create({providers:S,parent:this._injector}),g=new gt(o.toastComponent,k),d=l.attach(g,o.newestOnTop);C.componentInstance=d.instance;let F={toastId:this.index,title:s||"",message:i||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:f.onTap(),onAction:f.onAction(),portal:d};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{F.toastRef.activate()})),this.toasts.push(F),F}static \u0275fac=function(i){return new(i||n)(U(Wt),U(ve),U(Z),U(Mt),U(at))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_e=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,s){this.toastrService=e,this.toastPackage=i,this.ngZone=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=N(m({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),i=this.hideTime-e;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=N(m({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=N(m({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),i)):this.timeout=setTimeout(()=>e(),i)}outsideInterval(e,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),i)):this.intervalId=setInterval(()=>e(),i)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(i){return new(i||n)(x(zt),x(M),x(at))};static \u0275cmp=st({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,s){i&1&&W("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(Ht("@flyInOut",s.state),I(s.toastClasses),$("display",s.displayStyle))},standalone:!0,features:[ut],attrs:$t,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&K(0,re,3,0,"button",0)(1,ce,3,5,"div",1)(2,le,1,3,"div",2)(3,he,2,4,"div",3)(4,ue,2,2,"div",4),i&2&&(p("ngIf",s.options.closeButton),u(),p("ngIf",s.title),u(),p("ngIf",s.message&&s.options.enableHtml),u(),p("ngIf",s.message&&!s.options.enableHtml),u(),p("ngIf",s.options.progressBar))},dependencies:[pt],encapsulation:2,data:{animation:[Vt("flyInOut",[X("inactive",Y({opacity:0})),X("active",Y({opacity:1})),X("removed",Y({opacity:0})),mt("inactive => active",ft("{{ easeTime }}ms {{ easing }}")),mt("active => removed",ft("{{ easeTime }}ms {{ easing }}"))])]}})}return n})(),we=N(m({},Gt),{toastComponent:_e}),Je=(n={})=>qt([{provide:Wt,useValue:{default:we,config:n}}]);var Ce=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){if(this.state==="inactive")return"none"}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,i,s){this.toastrService=e,this.toastPackage=i,this.appRef=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),i=this.hideTime-e;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||n)(x(zt),x(M),x(Q))};static \u0275cmp=st({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,s){i&1&&W("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(I(s.toastClasses),$("display",s.displayStyle))},standalone:!0,features:[ut],attrs:$t,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&K(0,de,3,0,"button",0)(1,fe,3,5,"div",1)(2,me,1,3,"div",2)(3,ge,2,4,"div",3)(4,be,2,2,"div",4),i&2&&(p("ngIf",s.options.closeButton),u(),p("ngIf",s.title),u(),p("ngIf",s.message&&s.options.enableHtml),u(),p("ngIf",s.message&&!s.options.enableHtml),u(),p("ngIf",s.options.progressBar))},dependencies:[pt],encapsulation:2})}return n})(),Ze=N(m({},Gt),{toastComponent:Ce});var Jt={production:!0,apiUrl:"https://rec-back.dev.technostrea.fr/api",authUrl:"https://pocketbase.dev.technostrea.fr",endpoints:{recipes:{GET_ALL_RECIPE:(n=0,t=10)=>`/recipe/all?page=${n}&size=${t}`,POST_STORE_RECIPE:"/recipe/create"},ingredients:{GET_ALL_INGREDIENT:"/ingredients"},step:{}}};var _=class n extends Error{constructor(t){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,n.prototype),t!==null&&typeof t=="object"&&(this.url=typeof t.url=="string"?t.url:"",this.status=typeof t.status=="number"?t.status:0,this.isAbort=!!t.isAbort,this.originalError=t.originalError,t.response!==null&&typeof t.response=="object"?this.response=t.response:t.data!==null&&typeof t.data=="object"?this.response=t.data:this.response={}),this.originalError||t instanceof n||(this.originalError=t),typeof DOMException<"u"&&t instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return m({},this)}},tt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Te(n,t){let e={};if(typeof n!="string")return e;let i=Object.assign({},t||{}).decode||Se,s=0;for(;s<n.length;){let o=n.indexOf("=",s);if(o===-1)break;let r=n.indexOf(";",s);if(r===-1)r=n.length;else if(r<o){s=n.lastIndexOf(";",o-1)+1;continue}let a=n.slice(s,o).trim();if(e[a]===void 0){let l=n.slice(o+1,r).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1));try{e[a]=i(l)}catch{e[a]=l}}s=r+1}return e}function Zt(n,t,e){let i=Object.assign({},e||{}),s=i.encode||Oe;if(!tt.test(n))throw new TypeError("argument name is invalid");let o=s(t);if(o&&!tt.test(o))throw new TypeError("argument val is invalid");let r=n+"="+o;if(i.maxAge!=null){let a=i.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(a)}if(i.domain){if(!tt.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!tt.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(i.expires)||isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function Se(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function Oe(n){return encodeURIComponent(n)}var Ie=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal,ee;function B(n){if(n)try{let t=decodeURIComponent(ee(n.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}function ie(n,t=0){let e=B(n);return!(Object.keys(e).length>0&&(!e.exp||e.exp-t>Date.now()/1e3))}ee=typeof atob!="function"||Ie?n=>{let t=String(n).replace(/=+$/,"");if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,i,s=0,o=0,r="";i=t.charAt(o++);~i&&(e=s%4?64*e+i:i,s++%4)?r+=String.fromCharCode(255&e>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return r}:atob;var Qt="pb_auth",z=class{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!ie(this.token)}get isSuperuser(){let t=B(this.token);return t.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&t.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),B(this.token).type=="auth"&&!this.isSuperuser}save(t,e){this.baseToken=t||"",this.baseModel=e||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(t,e=Qt){let i=Te(t||"")[e]||"",s={};try{s=JSON.parse(i),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.record||s.model||null)}exportToCookie(t,e=Qt){let i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=B(this.token);i.expires=s?.exp?new Date(1e3*s.exp):new Date("1970-01-01"),t=Object.assign({},i,t);let o={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null},r=Zt(e,JSON.stringify(o),t),a=typeof Blob<"u"?new Blob([r]).size:r.length;if(o.record&&a>4096){o.record={id:o.record?.id,email:o.record?.email};let l=["collectionId","collectionName","verified"];for(let h in this.record)l.includes(h)&&(o.record[h]=this.record[h]);r=Zt(e,JSON.stringify(o),t)}return r}onChange(t,e=!1){return this._onChangeCallbacks.push(t),e&&t(this.token,this.record),()=>{for(let i=this._onChangeCallbacks.length-1;i>=0;i--)if(this._onChangeCallbacks[i]==t)return delete this._onChangeCallbacks[i],void this._onChangeCallbacks.splice(i,1)}}triggerChange(){for(let t of this._onChangeCallbacks)t&&t(this.token,this.record)}},Ct=class extends z{constructor(t="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=t,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){let t=this._storageGet(this.storageKey)||{};return t.record||t.model||null}get model(){return this.record}save(t,e){this._storageSet(this.storageKey,{token:t,record:e}),super.save(t,e)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(t){if(typeof window<"u"&&window?.localStorage){let e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]}_storageSet(t,e){if(typeof window<"u"&&window?.localStorage){let i=e;typeof e!="string"&&(i=JSON.stringify(e)),window.localStorage.setItem(t,i)}else this.storageFallback[t]=e}_storageRemove(t){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(t),delete this.storageFallback[t]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",t=>{if(t.key!=this.storageKey)return;let e=this._storageGet(this.storageKey)||{};super.save(e.token||"",e.record||e.model||null)})}},T=class{constructor(t){this.client=t}},Tt=class extends T{getAll(t){return c(this,null,function*(){return t=Object.assign({method:"GET"},t),this.client.send("/api/settings",t)})}update(t,e){return c(this,null,function*(){return e=Object.assign({method:"PATCH",body:t},e),this.client.send("/api/settings",e)})}testS3(t="storage",e){return c(this,null,function*(){return e=Object.assign({method:"POST",body:{filesystem:t}},e),this.client.send("/api/settings/test/s3",e).then(()=>!0)})}testEmail(t,e,i,s){return c(this,null,function*(){return s=Object.assign({method:"POST",body:{email:e,template:i,collection:t}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)})}generateAppleClientSecret(t,e,i,s,o,r){return c(this,null,function*(){return r=Object.assign({method:"POST",body:{clientId:t,teamId:e,keyId:i,privateKey:s,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)})}},Re=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function kt(n){if(n){n.query=n.query||{};for(let t in n)Re.includes(t)||(n.query[t]=n[t],delete n[t])}}function se(n){let t=[];for(let e in n){if(n[e]===null)continue;let i=n[e],s=encodeURIComponent(e);if(Array.isArray(i))for(let o of i)t.push(s+"="+encodeURIComponent(o));else i instanceof Date?t.push(s+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(s+"="+encodeURIComponent(JSON.stringify(i))):t.push(s+"="+encodeURIComponent(i))}return t.join("&")}var et=class extends T{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(t,e,i){return c(this,null,function*(){if(!t)throw new Error("topic must be set.");let s=t;if(i){kt(i=Object.assign({},i));let r="options="+encodeURIComponent(JSON.stringify({query:i.query,headers:i.headers}));s+=(s.includes("?")?"&":"?")+r}let o=function(r){let a=r,l;try{l=JSON.parse(a?.data)}catch{}e(l||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(o),this.isConnected?this.subscriptions[s].length===1?yield this.submitSubscriptions():this.eventSource?.addEventListener(s,o):yield this.connect(),()=>c(this,null,function*(){return this.unsubscribeByTopicAndListener(t,o)})})}unsubscribe(t){return c(this,null,function*(){let e=!1;if(t){let i=this.getSubscriptionsByTopic(t);for(let s in i)if(this.hasSubscriptionListeners(s)){for(let o of this.subscriptions[s])this.eventSource?.removeEventListener(s,o);delete this.subscriptions[s],e||(e=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?e&&(yield this.submitSubscriptions()):this.disconnect()})}unsubscribeByPrefix(t){return c(this,null,function*(){let e=!1;for(let i in this.subscriptions)if((i+"?").startsWith(t)){e=!0;for(let s of this.subscriptions[i])this.eventSource?.removeEventListener(i,s);delete this.subscriptions[i]}e&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(t,e){return c(this,null,function*(){let i=!1,s=this.getSubscriptionsByTopic(t);for(let o in s){if(!Array.isArray(this.subscriptions[o])||!this.subscriptions[o].length)continue;let r=!1;for(let a=this.subscriptions[o].length-1;a>=0;a--)this.subscriptions[o][a]===e&&(r=!0,delete this.subscriptions[o][a],this.subscriptions[o].splice(a,1),this.eventSource?.removeEventListener(o,e));r&&(this.subscriptions[o].length||delete this.subscriptions[o],i||this.hasSubscriptionListeners(o)||(i=!0))}this.hasSubscriptionListeners()?i&&(yield this.submitSubscriptions()):this.disconnect()})}hasSubscriptionListeners(t){if(this.subscriptions=this.subscriptions||{},t)return!!this.subscriptions[t]?.length;for(let e in this.subscriptions)if(this.subscriptions[e]?.length)return!0;return!1}submitSubscriptions(){return c(this,null,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(t=>{if(!t?.isAbort)throw t})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(t){let e={};t=t.includes("?")?t:t+"?";for(let i in this.subscriptions)(i+"?").startsWith(t)&&(e[i]=this.subscriptions[i]);return e}getNonEmptySubscriptionKeys(){let t=[];for(let e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.addEventListener(t,e)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let t in this.subscriptions)for(let e of this.subscriptions[t])this.eventSource.removeEventListener(t,e)}connect(){return c(this,null,function*(){if(!(this.reconnectAttempts>0))return new Promise((t,e)=>{this.pendingConnects.push({resolve:t,reject:e}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=t=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",t=>{let e=t;this.clientId=e?.lastEventId,this.submitSubscriptions().then(()=>c(this,null,function*(){let i=3;for(;this.hasUnsentSubscriptions()&&i>0;)i--,yield this.submitSubscriptions()})).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);let i=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in i)for(let o of i[s])o(t)}).catch(i=>{this.clientId="",this.connectErrorHandler(i)})})}hasUnsentSubscriptions(){let t=this.getNonEmptySubscriptionKeys();if(t.length!=this.lastSentSubscriptions.length)return!0;for(let e of t)if(!this.lastSentSubscriptions.includes(e))return!0;return!1}connectErrorHandler(t){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let i of this.pendingConnects)i.reject(new _(t));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);let e=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},e)}disconnect(t=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(let e of this.pendingConnects)e.resolve();this.pendingConnects=[]}}},it=class extends T{decode(t){return t}getFullList(t,e){return c(this,null,function*(){if(typeof t=="number")return this._getFullList(t,e);let i=500;return(e=Object.assign({},t,e)).batch&&(i=e.batch,delete e.batch),this._getFullList(i,e)})}getList(t=1,e=30,i){return c(this,null,function*(){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send(this.baseCrudPath,i).then(s=>(s.items=s.items?.map(o=>this.decode(o))||[],s))})}getFirstListItem(t,e){return c(this,null,function*(){return(e=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+t},e)).query=Object.assign({filter:t,skipTotal:1},e.query),this.getList(1,1,e).then(i=>{if(!i?.items?.length)throw new _({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return i.items[0]})})}getOne(t,e){return c(this,null,function*(){if(!t)throw new _({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(i=>this.decode(i))})}create(t,e){return c(this,null,function*(){return e=Object.assign({method:"POST",body:t},e),this.client.send(this.baseCrudPath,e).then(i=>this.decode(i))})}update(t,e,i){return c(this,null,function*(){return i=Object.assign({method:"PATCH",body:e},i),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),i).then(s=>this.decode(s))})}delete(t,e){return c(this,null,function*(){return e=Object.assign({method:"DELETE"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t),e).then(()=>!0)})}_getFullList(t=500,e){(e=e||{}).query=Object.assign({skipTotal:1},e.query);let i=[],s=o=>c(this,null,function*(){return this.getList(o,t||500,e).then(r=>{let a=r.items;return i=i.concat(a),a.length==r.perPage?s(o+1):i})});return s(1)}};function A(n,t,e,i){let s=i!==void 0;return s||e!==void 0?s?(console.warn(n),t.body=Object.assign({},t.body,e),t.query=Object.assign({},t.query,i),t):Object.assign(t,e):t}function wt(n){n._resetAutoRefresh?.()}var St=class n extends it{constructor(t,e){super(t),this.collectionIdOrName=e}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}subscribe(t,e,i){return c(this,null,function*(){if(!t)throw new Error("Missing topic.");if(!e)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e,i)})}unsubscribe(t){return c(this,null,function*(){return t?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(t,e){return c(this,null,function*(){if(typeof t=="number")return O(n.prototype,this,"getFullList").call(this,t,e);let i=Object.assign({},t,e);return O(n.prototype,this,"getFullList").call(this,i)})}getList(t=1,e=30,i){return c(this,null,function*(){return O(n.prototype,this,"getList").call(this,t,e,i)})}getFirstListItem(t,e){return c(this,null,function*(){return O(n.prototype,this,"getFirstListItem").call(this,t,e)})}getOne(t,e){return c(this,null,function*(){return O(n.prototype,this,"getOne").call(this,t,e)})}create(t,e){return c(this,null,function*(){return O(n.prototype,this,"create").call(this,t,e)})}update(t,e,i){return c(this,null,function*(){return O(n.prototype,this,"update").call(this,t,e,i).then(s=>{if(this.client.authStore.record?.id===s?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let o=Object.assign({},this.client.authStore.record.expand),r=Object.assign({},this.client.authStore.record,s);o&&(r.expand=Object.assign(o,s.expand)),this.client.authStore.save(this.client.authStore.token,r)}return s})})}delete(t,e){return c(this,null,function*(){return O(n.prototype,this,"delete").call(this,t,e).then(i=>(!i||this.client.authStore.record?.id!==t||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),i))})}authResponse(t){let e=this.decode(t?.record||{});return this.client.authStore.save(t?.token,e),Object.assign({},t,{token:t?.token||"",record:e})}listAuthMethods(t){return c(this,null,function*(){return t=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},t),this.client.send(this.baseCollectionPath+"/auth-methods",t)})}authWithPassword(t,e,i){return c(this,null,function*(){let s;i=Object.assign({method:"POST",body:{identity:t,password:e}},i),this.isSuperusers&&(s=i.autoRefreshThreshold,delete i.autoRefreshThreshold,i.autoRefresh||wt(this.client));let o=yield this.client.send(this.baseCollectionPath+"/auth-with-password",i);return o=this.authResponse(o),s&&this.isSuperusers&&function(a,l,h,C){wt(a);let f=a.beforeSend,S=a.authStore.record,k=a.authStore.onChange((g,d)=>{(!g||d?.id!=S?.id||(d?.collectionId||S?.collectionId)&&d?.collectionId!=S?.collectionId)&&wt(a)});a._resetAutoRefresh=function(){k(),a.beforeSend=f,delete a._resetAutoRefresh},a.beforeSend=(g,d)=>c(this,null,function*(){let F=a.authStore.token;if(d.query?.autoRefresh)return f?f(g,d):{url:g,sendOptions:d};let b=a.authStore.isValid;if(b&&ie(a.authStore.token,l))try{yield h()}catch{b=!1}b||(yield C());let q=d.headers||{};for(let v in q)if(v.toLowerCase()=="authorization"&&F==q[v]&&a.authStore.token){q[v]=a.authStore.token;break}return d.headers=q,f?f(g,d):{url:g,sendOptions:d}})}(this.client,s,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(t,e,Object.assign({autoRefresh:!0},i))),o})}authWithOAuth2Code(t,e,i,s,o,r,a){return c(this,null,function*(){let l={method:"POST",body:{provider:t,code:e,codeVerifier:i,redirectURL:s,createData:o}};return l=A("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",l,r,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",l).then(h=>this.authResponse(h))})}authWithOAuth2(...t){if(t.length>1||typeof t?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(t?.[0]||"",t?.[1]||"",t?.[2]||"",t?.[3]||"",t?.[4]||{},t?.[5]||{},t?.[6]||{});let e=t?.[0]||{},i=null;e.urlCallback||(i=Yt(void 0));let s=new et(this.client);function o(){i?.close(),s.unsubscribe()}let r={},a=e.requestKey;return a&&(r.requestKey=a),this.listAuthMethods(r).then(l=>{let h=l.oauth2.providers.find(S=>S.name===e.provider);if(!h)throw new _(new Error(`Missing or invalid provider "${e.provider}".`));let C=this.client.buildURL("/api/oauth2-redirect"),f=a?this.client.cancelControllers?.[a]:void 0;return f&&(f.signal.onabort=()=>{o()}),new Promise((S,k)=>c(this,null,function*(){try{yield s.subscribe("@oauth2",b=>c(this,null,function*(){let q=s.clientId;try{if(!b.state||q!==b.state)throw new Error("State parameters don't match.");if(b.error||!b.code)throw new Error("OAuth2 redirect error or missing code: "+b.error);let v=Object.assign({},e);delete v.provider,delete v.scopes,delete v.createData,delete v.urlCallback,f?.signal?.onabort&&(f.signal.onabort=null);let ne=yield this.authWithOAuth2Code(h.name,b.code,h.codeVerifier,C,e.createData,v);S(ne)}catch(v){k(new _(v))}o()}));let g={state:s.clientId};e.scopes?.length&&(g.scope=e.scopes.join(" "));let d=this._replaceQueryParams(h.authURL+C,g);yield(e.urlCallback||function(b){i?i.location.href=b:i=Yt(b)})(d)}catch(g){o(),k(new _(g))}}))}).catch(l=>{throw o(),l})}authRefresh(t,e){return c(this,null,function*(){let i={method:"POST"};return i=A("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",i,t,e),this.client.send(this.baseCollectionPath+"/auth-refresh",i).then(s=>this.authResponse(s))})}requestPasswordReset(t,e,i){return c(this,null,function*(){let s={method:"POST",body:{email:t}};return s=A("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)})}confirmPasswordReset(t,e,i,s,o){return c(this,null,function*(){let r={method:"POST",body:{token:t,password:e,passwordConfirm:i}};return r=A("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)})}requestVerification(t,e,i){return c(this,null,function*(){let s={method:"POST",body:{email:t}};return s=A("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)})}confirmVerification(t,e,i){return c(this,null,function*(){let s={method:"POST",body:{token:t}};return s=A("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{let o=B(t),r=this.client.authStore.record;return r&&!r.verified&&r.id===o.id&&r.collectionId===o.collectionId&&(r.verified=!0,this.client.authStore.save(this.client.authStore.token,r)),!0})})}requestEmailChange(t,e,i){return c(this,null,function*(){let s={method:"POST",body:{newEmail:t}};return s=A("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,e,i),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)})}confirmEmailChange(t,e,i,s){return c(this,null,function*(){let o={method:"POST",body:{token:t,password:e}};return o=A("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,i,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>{let r=B(t),a=this.client.authStore.record;return a&&a.id===r.id&&a.collectionId===r.collectionId&&this.client.authStore.clear(),!0})})}listExternalAuths(t,e){return c(this,null,function*(){return this.client.collection("_externalAuths").getFullList(Object.assign({},e,{filter:this.client.filter("recordRef = {:id}",{id:t})}))})}unlinkExternalAuth(t,e,i){return c(this,null,function*(){let s=yield this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:t,provider:e}));return this.client.collection("_externalAuths").delete(s.id,i).then(()=>!0)})}requestOTP(t,e){return c(this,null,function*(){return e=Object.assign({method:"POST",body:{email:t}},e),this.client.send(this.baseCollectionPath+"/request-otp",e)})}authWithOTP(t,e,i){return c(this,null,function*(){return i=Object.assign({method:"POST",body:{otpId:t,password:e}},i),this.client.send(this.baseCollectionPath+"/auth-with-otp",i).then(s=>this.authResponse(s))})}impersonate(t,e,i){return c(this,null,function*(){(i=Object.assign({method:"POST",body:{duration:e}},i)).headers=i.headers||{},i.headers.Authorization||(i.headers.Authorization=this.client.authStore.token);let s=new J(this.client.baseURL,new z,this.client.lang),o=yield s.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(t),i);return s.authStore.save(o?.token,this.decode(o?.record||{})),s})}_replaceQueryParams(t,e={}){let i=t,s="";t.indexOf("?")>=0&&(i=t.substring(0,t.indexOf("?")),s=t.substring(t.indexOf("?")+1));let o={},r=s.split("&");for(let a of r){if(a=="")continue;let l=a.split("=");o[decodeURIComponent(l[0].replace(/\+/g," "))]=decodeURIComponent((l[1]||"").replace(/\+/g," "))}for(let a in e)e.hasOwnProperty(a)&&(e[a]==null?delete o[a]:o[a]=e[a]);s="";for(let a in o)o.hasOwnProperty(a)&&(s!=""&&(s+="&"),s+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(o[a].replace(/%20/g,"+")));return s!=""?i+"?"+s:i}};function Yt(n){if(typeof window>"u"||!window?.open)throw new _(new Error("Not in a browser context - please pass a custom urlCallback function."));let t=1024,e=768,i=window.innerWidth,s=window.innerHeight;t=t>i?i:t,e=e>s?s:e;let o=i/2-t/2,r=s/2-e/2;return window.open(n,"popup_window","width="+t+",height="+e+",top="+r+",left="+o+",resizable,menubar=no")}var Ot=class extends it{get baseCrudPath(){return"/api/collections"}import(t,e=!1,i){return c(this,null,function*(){return i=Object.assign({method:"PUT",body:{collections:t,deleteMissing:e}},i),this.client.send(this.baseCrudPath+"/import",i).then(()=>!0)})}getScaffolds(t){return c(this,null,function*(){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/meta/scaffolds",t)})}truncate(t,e){return c(this,null,function*(){return e=Object.assign({method:"DELETE"},e),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/truncate",e).then(()=>!0)})}},It=class extends T{getList(t=1,e=30,i){return c(this,null,function*(){return(i=Object.assign({method:"GET"},i)).query=Object.assign({page:t,perPage:e},i.query),this.client.send("/api/logs",i)})}getOne(t,e){return c(this,null,function*(){if(!t)throw new _({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/"+encodeURIComponent(t),e)})}getStats(t){return c(this,null,function*(){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/stats",t)})}},Rt=class extends T{check(t){return c(this,null,function*(){return t=Object.assign({method:"GET"},t),this.client.send("/api/health",t)})}},Et=class extends T{getUrl(t,e,i={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(t,e,i)}getURL(t,e,i={}){if(!e||!t?.id||!t?.collectionId&&!t?.collectionName)return"";let s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(t.collectionId||t.collectionName)),s.push(encodeURIComponent(t.id)),s.push(encodeURIComponent(e));let o=this.client.buildURL(s.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;let r=new URLSearchParams(i);o+=(o.includes("?")?"&":"?")+r}return o}getToken(t){return c(this,null,function*(){return t=Object.assign({method:"POST"},t),this.client.send("/api/files/token",t).then(e=>e?.token||"")})}},Dt=class extends T{getFullList(t){return c(this,null,function*(){return t=Object.assign({method:"GET"},t),this.client.send("/api/backups",t)})}create(t,e){return c(this,null,function*(){return e=Object.assign({method:"POST",body:{name:t}},e),this.client.send("/api/backups",e).then(()=>!0)})}upload(t,e){return c(this,null,function*(){return e=Object.assign({method:"POST",body:t},e),this.client.send("/api/backups/upload",e).then(()=>!0)})}delete(t,e){return c(this,null,function*(){return e=Object.assign({method:"DELETE"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}`,e).then(()=>!0)})}restore(t,e){return c(this,null,function*(){return e=Object.assign({method:"POST"},e),this.client.send(`/api/backups/${encodeURIComponent(t)}/restore`,e).then(()=>!0)})}getDownloadUrl(t,e){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(t,e)}getDownloadURL(t,e){return this.client.buildURL(`/api/backups/${encodeURIComponent(e)}?token=${encodeURIComponent(t)}`)}};function At(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function xt(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function Xt(n){for(let t in n){let e=Array.isArray(n[t])?n[t]:[n[t]];for(let i of e)if(At(i))return!0}return!1}var Ee=/^[\-\.\d]+$/;function te(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&Ee.test(n)){let t=+n;if(""+t===n)return t}return n}var jt=class extends T{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(t){return this.subs[t]||(this.subs[t]=new Pt(this.requests,t)),this.subs[t]}send(t){return c(this,null,function*(){let e=new FormData,i=[];for(let s=0;s<this.requests.length;s++){let o=this.requests[s];if(i.push({method:o.method,url:o.url,headers:o.headers,body:o.json}),o.files)for(let r in o.files){let a=o.files[r]||[];for(let l of a)e.append("requests."+s+"."+r,l)}}return e.append("@jsonPayload",JSON.stringify({requests:i})),t=Object.assign({method:"POST",body:e},t),this.client.send("/api/batch",t)})}},Pt=class{constructor(t,e){this.requests=[],this.requests=t,this.collectionIdOrName=e}upsert(t,e){e=Object.assign({body:t||{}},e);let i={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,e),this.requests.push(i)}create(t,e){e=Object.assign({body:t||{}},e);let i={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(i,e),this.requests.push(i)}update(t,e,i){i=Object.assign({body:e||{}},i);let s={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(t)};this.prepareRequest(s,i),this.requests.push(s)}delete(t,e){e=Object.assign({},e);let i={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(t)};this.prepareRequest(i,e),this.requests.push(i)}prepareRequest(t,e){if(kt(e),t.headers=e.headers,t.json={},t.files={},e.query!==void 0){let s=se(e.query);s&&(t.url+=(t.url.includes("?")?"&":"?")+s)}let i=e.body;xt(i)&&(i=function(o){let r={};return o.forEach((a,l)=>{if(l==="@jsonPayload"&&typeof a=="string")try{let h=JSON.parse(a);Object.assign(r,h)}catch(h){console.warn("@jsonPayload error:",h)}else r[l]!==void 0?(Array.isArray(r[l])||(r[l]=[r[l]]),r[l].push(te(a))):r[l]=te(a)}),r}(i));for(let s in i){let o=i[s];if(At(o))t.files[s]=t.files[s]||[],t.files[s].push(o);else if(Array.isArray(o)){let r=[],a=[];for(let l of o)At(l)?r.push(l):a.push(l);if(r.length>0&&r.length==o.length){t.files[s]=t.files[s]||[];for(let l of r)t.files[s].push(l)}else if(t.json[s]=a,r.length>0){let l=s;s.startsWith("+")||s.endsWith("+")||(l+="+"),t.files[l]=t.files[l]||[];for(let h of r)t.files[l].push(h)}}else t.json[s]=o}}},J=class{get baseUrl(){return this.baseURL}set baseUrl(t){this.baseURL=t}constructor(t="/",e,i="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=t,this.lang=i,e?this.authStore=e:typeof window<"u"&&window.Deno?this.authStore=new z:this.authStore=new Ct,this.collections=new Ot(this),this.files=new Et(this),this.logs=new It(this),this.settings=new Tt(this),this.realtime=new et(this),this.health=new Rt(this),this.backups=new Dt(this)}get admins(){return this.collection("_superusers")}createBatch(){return new jt(this)}collection(t){return this.recordServices[t]||(this.recordServices[t]=new St(this,t)),this.recordServices[t]}autoCancellation(t){return this.enableAutoCancellation=!!t,this}cancelRequest(t){return this.cancelControllers[t]&&(this.cancelControllers[t].abort(),delete this.cancelControllers[t]),this}cancelAllRequests(){for(let t in this.cancelControllers)this.cancelControllers[t].abort();return this.cancelControllers={},this}filter(t,e){if(!e)return t;for(let i in e){let s=e[i];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}t=t.replaceAll("{:"+i+"}",s)}return t}getFileUrl(t,e,i={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(t,e,i)}buildUrl(t){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(t)}buildURL(t){let e=this.baseURL;return typeof window>"u"||!window.location||e.startsWith("https://")||e.startsWith("http://")||(e=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(e+=window.location.pathname||"/",e+=e.endsWith("/")?"":"/"),e+=this.baseURL),t&&(e+=e.endsWith("/")?"":"/",e+=t.startsWith("/")?t.substring(1):t),e}send(t,e){return c(this,null,function*(){e=this.initSendOptions(t,e);let i=this.buildURL(t);if(this.beforeSend){let s=Object.assign({},yield this.beforeSend(i,e));s.url!==void 0||s.options!==void 0?(i=s.url||i,e=s.options||e):Object.keys(s).length&&(e=s,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(e.query!==void 0){let s=se(e.query);s&&(i+=(i.includes("?")?"&":"?")+s),delete e.query}return this.getHeader(e.headers,"Content-Type")=="application/json"&&e.body&&typeof e.body!="string"&&(e.body=JSON.stringify(e.body)),(e.fetch||fetch)(i,e).then(s=>c(this,null,function*(){let o={};try{o=yield s.json()}catch{}if(this.afterSend&&(o=yield this.afterSend(s,o,e)),s.status>=400)throw new _({url:s.url,status:s.status,data:o});return o})).catch(s=>{throw new _(s)})})}initSendOptions(t,e){if((e=Object.assign({method:"GET"},e)).body=function(s){if(typeof FormData>"u"||s===void 0||typeof s!="object"||s===null||xt(s)||!Xt(s))return s;let o=new FormData;for(let r in s){let a=s[r];if(typeof a!="object"||Xt({data:a})){let l=Array.isArray(a)?a:[a];for(let h of l)o.append(r,h)}else{let l={};l[r]=a,o.append("@jsonPayload",JSON.stringify(l))}}return o}(e.body),kt(e),e.query=Object.assign({},e.params,e.query),e.requestKey===void 0&&(e.$autoCancel===!1||e.query.$autoCancel===!1?e.requestKey=null:(e.$cancelKey||e.query.$cancelKey)&&(e.requestKey=e.$cancelKey||e.query.$cancelKey)),delete e.$autoCancel,delete e.query.$autoCancel,delete e.$cancelKey,delete e.query.$cancelKey,this.getHeader(e.headers,"Content-Type")!==null||xt(e.body)||(e.headers=Object.assign({},e.headers,{"Content-Type":"application/json"})),this.getHeader(e.headers,"Accept-Language")===null&&(e.headers=Object.assign({},e.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(e.headers,"Authorization")===null&&(e.headers=Object.assign({},e.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&e.requestKey!==null){let i=e.requestKey||(e.method||"GET")+t;delete e.requestKey,this.cancelRequest(i);let s=new AbortController;this.cancelControllers[i]=s,e.signal=s.signal}return e}getHeader(t,e){t=t||{},e=e.toLowerCase();for(let i in t)if(i.toLowerCase()==e)return t[i];return null}};var ri=(()=>{class n{constructor(){this.user=Ut(void 0),this.pb=new J(Jt.authUrl)}login(e){return c(this,null,function*(){let{email:i,password:s}=e;yield this.pb.collection("users").authWithPassword(i,s);let o={isValid:this.pb.authStore.isValid,record:this.pb.authStore.record,token:this.pb.authStore.token};return this.user.set(o),o})}register(e){return c(this,null,function*(){return yield this.pb.collection("users").create(e)})}logout(){return c(this,null,function*(){return this.pb.authStore.clear()})}updateUser(){this.user.set({isValid:this.pb.authStore.isValid,record:this.pb.authStore.record,token:this.pb.authStore.token})}setToken(e){this.pb.authStore.save(e)}isAuthenticated(){return this.pb.authStore.isValid}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{Jt as a,ri as b,P as c,De as d,Ae as e,Y as f,Bt as g,Kt as h,xe as i,zt as j,Je as k};
